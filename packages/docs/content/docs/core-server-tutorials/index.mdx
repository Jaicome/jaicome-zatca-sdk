---
title: Core + Server Tutorials
description: Step-by-step tutorials for core-only and core+server flows.
---

# Core + Server Tutorials

This tutorial set gives practical, end-to-end flows for using
`@jaicome/zatca-core` and `@jaicome/zatca-server`.

## Tutorial 1: Core-only Invoice Build (Portable)

```bash
npm install @jaicome/zatca-core
```

```ts
import {
  buildInvoice,
  generatePhaseOneQR,
  type ZATCAInvoiceProps,
} from "@jaicome/zatca-core";

const props: ZATCAInvoiceProps = {
  egsInfo: {
    id: "6f4d20e0-6bfe-4a80-9389-7dabe6620f14",
    name: "EGS1",
    model: "IOS",
    crnNumber: "7032256278",
    vatName: "Jaicome Information Technology",
    vatNumber: "311497191800003",
    branchName: "Main",
    branchIndustry: "Software",
  },
  invoiceCounterNumber: 1,
  invoiceSerialNumber: "EGS1-886431145-101",
  issueDate: new Date(),
  previousInvoiceHash:
    "NWZlY2ViNjZmZmM4NmYzOGQ5NTI3ODZjNmQ2OTZjNzljMmRiYzIzOWRkNGU5MWI0NjcyOWQ3M2EyN2ZiNTdlOQ==",
  lineItems: [
    {
      id: "1",
      name: "Sample Product",
      quantity: 2,
      taxExclusivePrice: 100,
      vatPercent: 0.15,
    },
  ],
  invoiceType: "INVOICE",
  invoiceCode: "SIMPLIFIED",
  paymentMethod: "CASH",
};

const invoice = buildInvoice(props);
const xml = invoice.getXML().toString({ no_header: false });
const phaseOneQr = generatePhaseOneQR(invoice);
```

## Tutorial 2: Server Signing with `NodeSigner`

```bash
npm install @jaicome/zatca-core @jaicome/zatca-server
```

```ts
import { ZATCAInvoice } from "@jaicome/zatca-core";
import { NodeSigner } from "@jaicome/zatca-server";

const signer = new NodeSigner(certificatePem);
const invoice = new ZATCAInvoice({ props, signer, acceptWarning: true });
const result = await invoice.sign(certificatePem, privateKeyPem);
```

## Tutorial 3: EGS Onboarding + Compliance + Reporting

```ts
import { EGS, type EGSInfo } from "@jaicome/zatca-server";

const egsInfo: EGSInfo = {
  id: "6f4d20e0-6bfe-4a80-9389-7dabe6620f14",
  name: "EGS2",
  model: "IOS",
  crnNumber: "7032256278",
  vatName: "Jaicome Information Technology",
  vatNumber: "311497191800003",
  branchName: "Main",
  branchIndustry: "Software",
};

const egs = new EGS(egsInfo, "simulation");
await egs.generateNewKeysAndCSR("solution_name");
const complianceRequestId = await egs.issueComplianceCertificate(otp);
await egs.issueProductionCertificate(complianceRequestId);
```

## Tutorial 4: Production Readiness Compliance Steps

```ts
import {
  REQUIRED_COMPLIANCE_STEPS,
  type ComplianceCheckPayload,
  type ZATCAComplianceStep,
} from "@jaicome/zatca-server";

const checks: Partial<Record<ZATCAComplianceStep, ComplianceCheckPayload>> = {
  "standard-compliant": {
    signedInvoiceString: signedXmlA,
    invoiceHash: hashA,
  },
  "standard-credit-note-compliant": {
    signedInvoiceString: signedXmlB,
    invoiceHash: hashB,
  },
  "standard-debit-note-compliant": {
    signedInvoiceString: signedXmlC,
    invoiceHash: hashC,
  },
  "simplified-compliant": {
    signedInvoiceString: signedXmlD,
    invoiceHash: hashD,
  },
  "simplified-credit-note-compliant": {
    signedInvoiceString: signedXmlE,
    invoiceHash: hashE,
  },
  "simplified-debit-note-compliant": {
    signedInvoiceString: signedXmlF,
    invoiceHash: hashF,
  },
};

const results = await egs.runComplianceChecksForProduction(
  checks,
  REQUIRED_COMPLIANCE_STEPS
);
```

## Common Pitfalls

- Importing `@jaicome/zatca-server` in browser/RN code.
- Sending production credentials to simulation endpoint (or vice versa).
- Calling `invoice.sign(...)` without injecting a signer.

## Next Docs

- [Core + Server Guide](/docs/core-server-guide)
- [API Reference](/docs/api-reference)
- [Runtime Support](/docs/runtime-support)
- [Validation Errors](/docs/validation-errors)
